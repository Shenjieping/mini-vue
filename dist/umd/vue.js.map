{"version":3,"file":"vue.js","sources":["../../src/util/index.js","../../src/observer/array.js","../../src/observer/dep.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/html-parser.js","../../src/compiler/codegen.js","../../src/compiler/index.js","../../src/util/next-tick.js","../../src/observer/scheduler.js","../../src/observer/watcher.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/util/options.js","../../src/init.js","../../src/vdom/vnode.js","../../src/vdom/create-element.js","../../src/render.js","../../src/initGlobalAPI/index.js","../../src/index.js"],"sourcesContent":["/**\n * @param {any} obj 需要判断的对象\n * @returns {boolean}\n */\nexport function isObject(obj) {\n  return obj && typeof obj === 'object';\n}\n\n/**\n * 给某个对象设置私有属性\n * @param {Object} obj 需要添加的对象\n * @param {string} key 属性\n * @param {any} val 值\n * @param {boolean} enumerable 是否可枚举\n */\nexport function def (obj, key, val, enumerable) {\n  Object.defineProperty(obj, key, {\n    value: val,\n    enumerable: !!enumerable,\n    writable: true,\n    configurable: true\n  })\n}\n\n/**\n * \n * @param {object} vm 代理的对象\n * @param {string} source \n * @param {string} key 代理的属性\n */\nexport function proxy(vm, source, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[source][key];\n    },\n    set(newValue) {\n      vm[source][key] = newValue;\n    }\n  })\n}","/* \n  我们要对数组的 7 个方法进行重写：\n    push, pop, shift, unshift, reverse, sort, splice\n  因为这7个方法会改变原数组\n */\n\nconst arrayProto = Array.prototype;\n// 原型链查找，会向上查找，先查找我们重写的，如果没有再向上查找原型链上的\nexport const arrayMethods = Object.create(arrayProto); // 拷贝原型上的方法，防止我们的代码破坏了原型链\n\nconst methodsToPatch = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'splice',\n  'sort',\n  'reverse'\n];\n\nmethodsToPatch.forEach(method => {\n  arrayMethods[method] = function(...args) {\n    // 调用我们的方法后。又去调用了原生的方法\n    const result = arrayProto[method].apply(this, args);\n    let ob = this.__ob__; // 将实例上的方法传过来\n    // push shift splice 添加的值可能还是一个对象\n    let inserted; // 保存当前用户插入的元素\n    switch (method) {\n      case 'push':\n      case 'shift':\n        inserted = args;\n        break;\n      case 'splice':\n        // splice有3个属性，只有最后一个属性才是新增的值\n        inserted = args.slice(2);\n        break;\n    }\n    if (inserted) {\n      // 将新增的属性继续观察\n      ob.observerArray(inserted);\n    }\n    ob.dep.notify(); // 如果用户调用了这里的方法，去通知视图更新\n    return result;\n  }\n});\n","let id = 0;\nexport default class Dep {\n  constructor() {\n    this.id = id++; // 记录一个唯一的id，用于后面的去重\n    this.subs = [];\n  }\n  depend() {\n    // watcher 和 dep 的关系：一个watcher 对应多个depl，一个dep对应多个Watcher，他们之间要互相记录一下\n    // this.subs.push(Dep.target); // 观察者模式，这样可能会重复调用\n    // 让这个Watcher记住我的dep\n    Dep.target.addDep(this);\n  }\n  notify() {\n    this.subs.forEach(watcher => watcher.update())\n  }\n  addSub(watcher) { // 这里放的就是Watcher\n    this.subs.push(watcher);\n  }\n}\n\nlet stack = [];\n// 目前可以做到将Watcher保存起来，和移除\nexport function pushTarget(watcher) {\n  Dep.target = watcher;\n  stack.push(watcher);\n}\n\nexport function popTarget() {\n  stack.pop();\n  Dep.target = stack[stack.length - 1];\n}","import { isObject, def } from \"../util/index\";\nimport { arrayMethods } from './array';\nimport Dep from './dep';\n\nclass Observer {\n  constructor(value) {\n    this.value = value;\n    this.dep = new Dep(); // 给数组用的\n    // 给当前值，添加一个不可枚举的私有属性，并于传值\n    def(value, '__ob__', this); // 这里如果不设置为不可枚举的值，会导致死循环\n    if (Array.isArray(value)) {\n      // 如果是数组的话。并不会对索引进行观察。因为会导致性能问题\n      // 如果数组里放的是对象。我再对里面的对象进行监控\n      this.observerArray(value);\n      // 我们还需要对 push pop shift unshift splice reverse sort 进行重写\n      value.__proto__ = arrayMethods;\n      /* \n        源码这里做了一个兼容处理，因为IE老浏览器是不支持 __proto__ 设置原型链\n        咋们这里为了简化，不做处理\n       */\n    } else {\n      // 如果是对象，则进行下一步\n      this.walk(value);\n    }\n  }\n  walk(obj) {\n    let keys = Object.keys(obj);\n    // 循环每一个key，添加get/set\n    for (let i = 0; i < keys.length; i++) {\n      let key = keys[i];\n      let value = obj[key];\n      defineReactive(obj, key, value); // 定义响应式数据\n    }\n  }\n  observerArray (items) {\n    for (let i = 0; i < items.length; i++) {\n      observe(items[i]);\n    }\n  }\n}\n\nexport function defineReactive(obj, key, value) {\n  let dep = new Dep(); // 这个dep只能给对象使用\n\n  // 递归设置嵌套的对象,但是这里的value可能是对象，也可能是数组，返回的是当前observer对应的实例\n  let childOb = observe(value);\n  Object.defineProperty(obj, key, {\n    get() {\n      // 每个属性都对应着自己的渲染Watcher\n      if (Dep.target) { // 如果当前有Watcher\n        dep.depend(); // 我要将Watcher存起来\n        if (childOb) { // 主要是对数组的依赖收集\n          childOb.dep.depend(); // 收集了数组的相关依赖\n          // 数组数组中嵌套了数组，也需要依赖收集\n          if (Array.isArray(value)) {\n            dependArray(value);\n          }\n        }\n      }\n      return value;\n    },\n    set(newValue) { // 设置值的时候做一些操作\n      if (value === newValue) {\n        return;\n      }\n      // console.log('update 视图更新');\n      observe(newValue); // 如果新设置的值是一个对象，也要被监控\n      value = newValue;\n      dep.notify(); // 通知依赖更新操作\n    }\n  });\n\n  /* \n    通过Vue源码可以看出，data还可以设置 get/set属性\n      如果设置了get，需要先执行函数，拿到返回值再进行处理。为了简化，这里不做这一层的处理\n   */\n}\n\n// 用于观测数据，给每个属性添加 get 和 set 方法\nexport function observe(value) {\n  if (!isObject(value)) {\n    return;\n  }\n  return new Observer(value);\n}\n\nfunction dependArray(value) {\n  for (let i = 0; i < value.length; i++) {\n    let current = value[i]; // 将数组中的每一个都取出来，数据变化后也去更新视图\n    // 数组中的数组也需要依赖收集\n    current.__ob__ && current.__ob__.dep.depend();\n    if (Array.isArray(current)) { // 如果是数组，进行递归\n      dependArray(current);\n    }\n  }\n}","import { observe } from \"./observer/index\";\nimport { proxy } from \"./util/index\";\n\nexport function initState(vm) {\n  const opts = vm.$options;\n  // Vue 的数据来源\n  if (opts.props) {\n    initProps(vm);\n  }\n  if (opts.methods) {\n    initMethods(vm);\n  }\n  if (opts.data) {\n    initData(vm);\n  }\n  if (opts.computed) {\n    initComputed(vm);\n  }\n  if (opts.watch) {\n    initWatch(vm);\n  }\n}\n\nfunction initProps(vm) {\n  \n}\nfunction initMethods(vm) {\n  \n}\nfunction initData(vm) {\n  // 数据初始化\n  let data = vm.$options.data;\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data;\n  // 对象劫持，用户改变了数据，我希望能检测到，从而更新页面\n  // MVVM 数据变化可以驱动视图\n\n  // 为了让用户更好的使用，需要将属性直接代理到 vm 上,用户可以通过 vm.xx 取值\n  for (let key in vm._data) {\n    proxy(vm, '_data', key);\n  }\n\n  // 通过Object.defineProperty 给属性增加get和set方法\n  observe(data); // 响应式原理\n}\nfunction initComputed(vm) {\n  \n}\nfunction initWatch(vm) {\n  \n}","// 字母a-zA-Z_ - . 数组小写字母 大写字母\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 标签名\n// ?:匹配不捕获   <aaa:aaa>\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\n// startTagOpen 可以匹配到开始标签 正则捕获到的内容是 (标签名)\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\n// 闭合标签 </xxxxxxx>\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\n// <div aa   =   \"123\"  bb=123  cc='123'\n// 捕获到的是 属性名 和 属性值 arguments[1] || arguments[2] || arguments[2]\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\n// <div >   <br/>\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >\n// 匹配动态变量的  +? 尽可能少匹配\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\nexport function parseHTML(html) {\n  let root; // 根节点\n  let stack = []; // 判断是否是闭合标签\n  let currentParent; // 用来标识当前元素的父节点\n  const ELEMENT_TYPE = 1; // 元素节点\n  const TEXT_TYPE = 3; // 文本节点\n\n  // 不停的去解析html字符串\n  while (html) {\n    let textEnd = html.indexOf('<'); // 从html < 开始匹配\n    if (textEnd === 0) {\n      // 如果当前索引为0,肯定是一个标签，可能是开始标签，也可能是结束标签，第一次肯定是开始标签\n      let startTagMatch = parseStartTag(); // 通过此方法获取到匹配的结果 tagName attrs\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        continue; // 如果开始标签匹配完之后，继续下一次匹配\n      }\n      let endTagMatch = html.match(endTag); // 匹配结尾标签\n      if (endTagMatch) { // 如果是结尾标签，则删除\n        advance(endTagMatch[0].length);\n        end(endTagMatch[1]);\n      }\n    }\n    let text;\n    if (textEnd > 0) { // 获取标签内的文本\n      text = html.substring(0, textEnd);\n      chars(text);\n    }\n    if (text) { // 如果文本存在，删除文本\n      advance(text.length);\n    }\n  }\n\n  function parseStartTag () {\n    let start = html.match(startTagOpen); // 如果匹配到就是开始标签\n    if (start) {\n      let match = {\n        tagName: start[1], // 标签名\n        attrs: [] // 属性\n      };\n      advance(start[0].length);\n      let end, attr;\n      // 解析属性，如果不是 > 结束标签，且有属性，则匹配\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5]\n        }); // 将标签和属性保存起来\n        advance(attr[0].length); // 将属性去掉\n      }\n      if (end) {\n        // 去掉结束的 >\n        advance(end[0].length);\n      }\n      return match;\n    }\n  }\n\n  // 删除匹配到的结果，不断向前走\n  function advance(n) {\n    html = html.substring(n);\n  }\n\n  function start (tagName, attrs) {\n    // 开始标签，创建一个AST元素\n    let element = createAstElement(tagName, attrs);\n    if (!root) { // 第一次没有root，就生成一个根节点\n      root = element;\n    }\n    currentParent = element; // 把点前元素标记成ast树\n    stack.push(element); // 将当前标签存放到栈中\n  }\n\n  function chars(text) {\n    text = text.trim();\n    // 文本节点\n    if (text) {\n      currentParent.children.push({\n        text,\n        type: TEXT_TYPE\n      });\n    }\n  }\n\n  function end(tagName) {\n    // 结束标签\n    let element = stack.pop();\n    // 判断标签是否已经闭合，此处暂未考虑自闭合的标签\n    if (element.tag !== tagName) {\n      throw new TypeError('标签未闭合');\n    }\n    // 我要标识当前这个元素是属于父元素的\n    currentParent = stack[stack.length - 1];\n    if (currentParent) {\n      element.parent = currentParent;\n      currentParent.children.push(element); // 实现了一个树的父子关系\n    }\n  }\n\n  function createAstElement(tagName, attrs) {\n    // 基本的树结构\n    return {\n      tag: tagName,\n      type: ELEMENT_TYPE,\n      children: [],\n      attrs,\n      parent: null\n    };\n  }\n\n  return root;\n}","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\nexport function generage (el) {\n  // 获取孩子节点\n  const children = genChildren(el.children);\n  let code = `_c(\"${el.tag}\", ${genProps(el.attrs)}${children ? `,${children}` : ''})`\n  return code;\n}\n\n// 处理成属性，拼接成字符串\nfunction genProps(attrs) {\n  // console.log(attrs)\n  if (!attrs.length) { // 如果没有属性就返回undefined\n    return undefined;\n  }\n  let str = '';\n  for (let i = 0; i < attrs.length; i++) {\n    let attr = attrs[i];\n    if (attr.name === 'style') { // 拼接style\n      // style=\"color: red\" => {style: {color: 'red'}}\n      let obj = {};\n      attr.value.split(';').forEach(item => {\n        let [key, value] = item.split(':');\n        obj[key] = value;\n      });\n      attr.value = obj;\n    }\n    str += `${attr.name}: ${JSON.stringify(attr.value)},`;\n  }\n  return `{${str.slice(0, -1)}}`;\n}\n\n// 处理孩子节点\nfunction genChildren (children) {\n  if (children && children.length > 0) {\n    // 拿到所有的孩子\n    return `${children.map(c => gen(c)).join(',')}`\n  } else {\n    return false;\n  }\n}\n\nfunction gen (node) {\n  if (node.type === 1) { // 元素标签\n    return generage(node);\n  } else { // 文本\n    let text = node.text;\n    // 还需要将里面的变量拿出来处理\n    // a {{name}} b {{age}} c  => _v(\"a\" + _s(name) + \"b\" + _s(age) + \"c\");\n    let tockens = [];\n    let match, index;\n    // 每次匹配的偏移量\n    let lastIndex = defaultTagRE.lastIndex = 0;\n    // 循环匹配大括号内的变量\n    while (match = defaultTagRE.exec(text)) {\n      index = match.index;\n      // 将第一个文本放进去\n      if (index > lastIndex) {\n        // 给文本加上双引号，后面解析的时候代表是一个字符串\n        tockens.push(JSON.stringify(text.slice(lastIndex, index)));\n      }\n      // 变量取出后用 _s 包裹\n      tockens.push(`_s(${match[1].trim()})`);\n      // 设置偏移量，下次匹配从此处开始\n      lastIndex = index + match[0].length;\n    }\n    // 将最后一个文本放进去\n    if (lastIndex < text.length) {\n      tockens.push(JSON.stringify(text.slice(lastIndex)));\n    }\n    return `_v(${tockens.join('+')})`;\n  }\n}","import { parseHTML } from './html-parser';\nimport { generage } from './codegen';\n\n/* \n  ast 语法树 -> 用对象来描述原生的语法\n  虚拟DOM -> 用对象来描述DOM节点\n */\nexport function compileToFunction(template) {\n  // 解析HTML字符串，变成AST语法树\n  const ast = parseHTML(template);\n  // 需要将AST树转为render函数，其实就是字符串拼接\n  // 核心思路就是，将模板转换为一下的字符串\n  // <div id=\"app\"><p>hello {{ name }}</p>{{ age }}</div>\n  // 将AST转为js方法\n  // _c('div', {id: app}, _c('p', undefined, _v('hello' + _s(name))), _s(age))\n  // console.log(ast);\n  let code = generage(ast);\n  // console.log(code);\n  // 所有的模板引擎实现，都需要用new Fucntion() 和 with\n  let renderFn = new Function(`with(this){return ${code}}`);\n  // console.log(renderFn);\n  return renderFn;\n}\n\n/* \n  <div id=\"app\">\n    <p>test</p>\n  </div>\n\n  AST语法树, 用一种抽象的语法来描述原生的HTML结构\n  let root = {\n    tag: 'div',\n    attrs: [{name: 'id', value: 'app'}],\n    type: 1,\n    children: [{\n      tag: 'p',\n      attrs: [],\n      type: 1,\n      children: [{\n        type: 3,\n        text: 'test'\n      }]\n    }]\n  }\n */","let callbacks = []; // 将用户放入的cb,和内部的cb 都存到一个数组中，最后一起更新\nlet pending = false\n\nexport function nextTick (cb) {\n  callbacks.push(cb);\n  if (!pending) {\n    setTimeout(flushCallbacks, 0);\n    pending = true; // 如果正在调用，就拦截一下\n    callbacks = [];\n  }\n}\n\nfunction flushCallbacks() {\n  callbacks.forEach(cb => cb());\n  pending = false;\n}","import { nextTick } from \"../util/next-tick\";\n\nlet queue = [];\nlet has = {};\nexport function queueWatcher(watcher) { // 批量更新\n  const id = watcher.id;\n  if (!has[id]) { // 这里拦截了。每次只能放进去一个值\n    queue.push(watcher);\n    has[id] = true;\n    // 宏任务、微任务（微任务使用了Vue.nextTick, 对异步方法进行封装）\n    // Vue.nextTick => promise / mutationObserver / setImmediate / setTimeout 优雅降级的过程\n    nextTick(flushSchedulerQueue);\n    /*\n    setTimeout(() => {\n      queue.forEach(watcher => watcher.run())\n      queue = []; // 执行完之后将队列清空，下次继续清空\n      has = {};\n    }, 0); */\n  }\n}\n\nfunction flushSchedulerQueue() {\n  queue.forEach(watcher => watcher.run())\n  queue = []; // 执行完之后将队列清空，下次继续清空\n  has = {};\n}","import { pushTarget, popTarget } from \"./dep\";\nimport { queueWatcher } from \"./scheduler\";\n\nlet id = 0;\nexport default class Watcher {\n  constructor(vm, expOrFn, cb, options, isRenderWatcher) {\n    this.vm = vm;\n    this.cb = cb;\n    this.id = id++;\n    this.options = options;\n    this.isRenderWatcher = isRenderWatcher;\n    this.depsId = new Set();\n    this.deps = [];\n\n    this.getter = expOrFn; // 将内部传过来的函数放在getter属性上\n    this.get(); // 调用get方法，会让渲染Watcher执行\n  }\n  get() {\n    // console.log('update'); // 多次调用同一个属性，只更新最后一次\n    pushTarget(this); // 将当前的Watcher存起来\n    this.getter(); // 执行的就是 vm._update\n    popTarget(); // 移除Watcher\n  }\n  update () {\n    // 这里需要等待一起更新，因为每次调用 update 都会存入一个watcher\n    // this.get();\n    queueWatcher(this); // 先存到一个队列，等同步代码执行完之后再去执行\n  }\n  addDep (dep) {\n    // watcher 不能放重读的dep，同样dep里不能放重复的Watcher\n    let id = dep.id;\n    if (!this.depsId.has(id)) {\n      this.depsId.add(id);\n      this.deps.push(dep);\n      dep.addSub(this); // 让dep记住Watcher\n    }\n  }\n  run () {\n    this.get();\n  }\n}","export function patch(oldVnode, vnode) {\n  // console.log(oldVnode, vnode);\n  // 递归创建新的节点。替换掉老的节点\n  // 判断是更新还是要渲染\n  const isRealElement = oldVnode.nodeType;\n  if (isRealElement) { // 如果不存在说明是要渲染\n    const oldElm = oldVnode; // div id = \"app\"\n    const parentElm = oldElm.parentNode; // body\n\n    let el = createElm(vnode); // 创建元素\n    parentElm.insertBefore(el, oldElm.nextSibling); // 插入到老的元素的下一个节点。再把老节点删除，就实现了替换\n    parentElm.removeChild(oldElm);\n    return el; // 将替换后的节点挂载到 $el上\n  }\n}\n\nfunction createElm(vnode) {\n  // 根据虚拟节点创建真实的节点\n  const { tag, children, key, data, text } = vnode;\n  // 是标签就创建标签\n  if (typeof tag === 'string') { // 如果tag存在，就要创建一个元素\n    vnode.el = document.createElement(tag);\n    updatePropties(vnode) // 将属性添加到元素上\n    children.forEach(child => {\n      // 递归创建子节点，放到父节点中\n      return vnode.el.appendChild(createElm(child));\n    })\n  } else { // 不存在就创建一个文本几万点\n    // 虚拟dom上映射着真实dom\n    vnode.el = document.createTextNode(text);\n  }\n  return vnode.el;\n}\n\n// 更新属性\nfunction  updatePropties(vnode) {\n  let newProps = vnode.data || {};\n  let el = vnode.el;\n  for(let key in newProps) {\n    if (key === 'style') { // 将样式属性添加上\n      for(let styleName in newProps[key]) {\n        el.style[styleName] = newProps[key][styleName];\n      }\n    } else if (key === 'class') { // class特殊处理\n      el.className = newPropsp[key];\n    } else { // 剩下的就直接放上去就行了\n      el.setAttribute(key, newProps[key]);\n    }\n  }\n}","import Watcher from \"./observer/watcher\";\nimport { patch } from './vdom/patch'\n\nexport function mountComponent(vm, el) {\n  vm.$el = el; // 真实的dom元素\n\n  callHook(vm, 'beforeMount') // 挂载之前的钩子\n  // 渲染页面\n  let updateComponent = () => { // 渲染和更新都会调用此方法\n    // 返回的是虚拟DOM，传给update 进行渲染操作\n    vm._update(vm._render());\n  }\n  // 渲染Watcher。每个组件都有一个Watcher\n  new Watcher(vm, updateComponent, () => {}, true); //true 表示他是一个渲染Watcher\n\n  callHook(vm, 'mounted') // 挂载结束的钩子\n\n  /* \n    Watcher 就是用来渲染的\n    vm._render 通过解析render方法，渲染出虚拟dom\n    vm._update 通过虚拟dom,创建真实的dom\n   */\n}\n\nexport function lifecycleMixin(Vue) {\n  Vue.prototype._update = function(vnode) {\n    const vm = this;\n    // 通过虚拟节点，渲染出真实的dom\n    vm.$el = patch(vm.$el, vnode); // 需要用虚拟节点创建出真实节点，替换掉原有的$el\n  }\n}\n\n// 此方法调用传入的生命周期钩子\nexport function callHook(vm, hook) {\n  const handlers = vm.$options[hook];\n  if (handlers) {\n    handlers.forEach(fn => fn.call(vm));\n  }\n}","export const LIFECYCLE_HOOKS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed',\n  'activated',\n  'deactivated',\n  'errorCaptured',\n  'serverPrefetch'\n]\n\nlet strats = {};\nLIFECYCLE_HOOKS.forEach(hook => {\n  strats[hook] = mergeHooks;\n});\n\n\nfunction mergeHooks(parentVal, childVal) { // 将生命周期合并为一个数组\n  if (childVal) {\n    if (parentVal) {\n      return parentVal.concat(childVal);\n    } else {\n      return [childVal];\n    }\n  } else {\n    return parentVal;\n  }\n}\n\nexport function mergeOptions(parent, child) {\n  const options = {};\n\n  for (let key in parent) {\n    mergeField(key);\n  }\n  for (let key in child) {\n    if (!parent.hasOwnProperty(key)) { // 如果已经合并过了就不需要再次合并了\n      mergeField(key);\n    }\n  }\n\n  // 默认的合并策略，有些属性需要有特殊的合并策略，比如生命周期，需要合并成一个数组\n  function mergeField(key) {\n    if (strats[key]) {\n      return options[key] = strats[key](parent[key], child[key]);\n    }\n    if (typeof parent[key] === 'object' && typeof child[key] === 'object') {\n      options[key] = {\n        ...parent[key],\n        ...child[key]\n      };\n    } else if (!child[key]) {\n      options[key] = parent[key];\n    } else {\n      options[key] = child[key];\n    }\n  }\n  return options;\n}\n","import { initState } from './state';\nimport { compileToFunction } from './compiler/index';\nimport { mountComponent, callHook } from './lifecycle';\nimport { mergeOptions } from './util/options';\nimport { nextTick } from './util/next-tick';\n// 在原型上添加一个init方法\nexport function initMixin (Vue) {\n  // 初始化流程\n  Vue.prototype._init = function(options) {\n    // 数据的劫持\n    const vm = this;\n    // vue 中使用 this.$options 指代的就是用户传递的属性\n    // vm.constuctor 将用户传递的和全局的进行合并\n    vm.$options = mergeOptions(vm.constructor.options, options);\n\n    callHook(vm, 'beforeCreate'); // 创建之前\n    // 初始化转态\n    initState(vm); // 分割代码\n\n    callHook(vm, 'created'); // 创建之后\n\n    // 如果用户传入了el属性，需要将页面渲染出来\n    // 如果用户传入了el，就要实现挂载的流程\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el);\n    }\n  }\n\n  Vue.prototype.$mount = function(el) {\n    const vm = this;\n    const options = vm.$options;\n    el = document.querySelector(el);\n\n    // 默认会先查找render，没有就会采用 template,在没有就用html\n    if (!options.render) {\n      // 对模板进行编译\n      let template = options.template;\n      if (!template && el) { // 使用的html\n        template = getOuterHTML(el); // 拿到所有的DOM文档\n      }\n      // 我们需要将template转换为render方法\n      const render = compileToFunction(template);\n      options.render = render;\n    }\n\n    // 挂载组件\n    mountComponent(vm, el);\n  }\n\n  // 用户调用的nextTick\n  Vue.prototype.$nextTick = nextTick;\n}\n\nfunction getOuterHTML (el) { // 获取html元素\n  if (el.outerHTML) { // outerHTML 在IE中不兼容\n    return el.outerHTML\n  } else {\n    const container = document.createElement('div')\n    container.appendChild(el.cloneNode(true))\n    return container.innerHTML\n  }\n}","// 创建虚拟节点\nexport default class VNode {\n  constructor(tag, data, children, text) {\n    this.tag = tag;\n    this.data = data;\n    this.key = data && data.key;\n    this.children = children;\n    this.text = text;\n  }\n}\n","import VNode from './vnode';\n\nexport function createElement(tag, data = {}, ...children) {\n  return new VNode(tag, data, children, undefined);\n}\n\nexport function createTextNode(text) {\n  // 创建文本节点\n  return new VNode(undefined, undefined, undefined, text);\n}\n\n// 虚拟节点，就是通过 _c _v 实现用对象来描述dom的操作\n// 将template 转换成AST语法树 -> 生成render方法 -> 生成虚拟dom -> 生成真实dom\n// 页面更新，重新生成虚拟dom -> diff更新dom","import { createElement, createTextNode } from \"./vdom/create-element\";\n\nexport function renderMinxin(Vue) {\n  // 渲染虚拟DOM\n  Vue.prototype._render = function() {\n    const vm = this;\n    const { render } = vm.$options;\n\n    const vnode = render.call(vm); // 去实例化，取值\n    return vnode;\n  }\n  /* \n    _c 创建元素的虚拟节点\n    _v 创建文本的虚拟节点\n    _s JSON.stringfiy\n   */\n  Vue.prototype._c = function() {\n    return createElement(...arguments); //tagm data, children\n  }\n  Vue.prototype._v = function(text) {\n    return createTextNode(text);\n  }\n  Vue.prototype._s = function(val) {\n    if (!val) {\n      return '';\n    } else if (typeof val === 'object') {\n      return JSON.stringify(val);\n    }\n    return val;\n  }\n}","import { mergeOptions } from \"../util/options\";\n\nexport function initGlobalAPI(Vue) {\n  // 整合了所有的全局API\n  Vue.options = {};\n  Vue.mixin = function(mixin) {\n    this.options = mergeOptions(this.options, mixin);\n  }\n\n  /*\n  Vue.mixin({\n    beforeCreate() {\n      console.log('mixin1 beforeCreate');\n    },\n    a: 1\n  })\n  Vue.mixin({\n    beforeCreate() {\n      console.log('mixin2 beforeCreate');\n    },\n    mounted() {\n      console.log('mixin mounted');\n    },\n    b: 2\n  }) */\n  // 生命周期的合并策略 [beforeCreate, beforeCreate]\n  // console.log(Vue.options);\n}","// Vue核心代码\nimport { initMixin } from './init';\nimport { renderMinxin } from './render';\nimport { lifecycleMixin } from './lifecycle';\nimport { initGlobalAPI } from './initGlobalAPI/index';\n\nfunction Vue(options) {\n  // 进行Vue的初始化操作\n  this._init(options);\n}\n\ninitMixin(Vue);\nrenderMinxin(Vue);\nlifecycleMixin(Vue);\n\n// 初始化全局的API\ninitGlobalAPI(Vue);\n\nexport default Vue;"],"names":["isObject","obj","def","key","val","enumerable","Object","defineProperty","value","writable","configurable","proxy","vm","source","get","set","newValue","arrayProto","Array","prototype","arrayMethods","create","methodsToPatch","forEach","method","args","result","apply","ob","__ob__","inserted","slice","observerArray","dep","notify","id","Dep","subs","target","addDep","watcher","update","push","stack","pushTarget","popTarget","pop","length","Observer","isArray","__proto__","walk","keys","i","defineReactive","items","observe","childOb","depend","dependArray","current","initState","opts","$options","props","methods","data","initData","computed","watch","_data","call","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","root","currentParent","ELEMENT_TYPE","TEXT_TYPE","textEnd","indexOf","startTagMatch","parseStartTag","start","tagName","attrs","endTagMatch","match","advance","end","text","substring","chars","attr","name","n","element","createAstElement","trim","children","type","tag","TypeError","parent","defaultTagRE","generage","el","genChildren","code","genProps","undefined","str","split","item","JSON","stringify","map","c","gen","join","node","tockens","index","lastIndex","exec","compileToFunction","template","ast","renderFn","Function","callbacks","pending","nextTick","cb","setTimeout","flushCallbacks","queue","has","queueWatcher","flushSchedulerQueue","run","Watcher","expOrFn","options","isRenderWatcher","depsId","Set","deps","getter","add","addSub","patch","oldVnode","vnode","isRealElement","nodeType","oldElm","parentElm","parentNode","createElm","insertBefore","nextSibling","removeChild","document","createElement","updatePropties","child","appendChild","createTextNode","newProps","styleName","style","className","newPropsp","setAttribute","mountComponent","$el","callHook","updateComponent","_update","_render","lifecycleMixin","Vue","hook","handlers","fn","LIFECYCLE_HOOKS","strats","mergeHooks","parentVal","childVal","concat","mergeOptions","mergeField","hasOwnProperty","initMixin","_init","constructor","$mount","querySelector","render","getOuterHTML","$nextTick","outerHTML","container","cloneNode","innerHTML","VNode","renderMinxin","_c","arguments","_v","_s","initGlobalAPI","mixin"],"mappings":"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"}