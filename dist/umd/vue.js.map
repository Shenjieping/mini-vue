{"version":3,"file":"vue.js","sources":["../../src/util/index.js","../../src/observer/array.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/html-parser.js","../../src/compiler/codegen.js","../../src/compiler/index.js","../../src/observer/watcher.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/vnode.js","../../src/vdom/create-element.js","../../src/render.js","../../src/index.js"],"sourcesContent":["/**\n * @param {any} obj 需要判断的对象\n * @returns {boolean}\n */\nexport function isObject(obj) {\n  return obj && typeof obj === 'object';\n}\n\n/**\n * 给某个对象设置私有属性\n * @param {Object} obj 需要添加的对象\n * @param {string} key 属性\n * @param {any} val 值\n * @param {boolean} enumerable 是否可枚举\n */\nexport function def (obj, key, val, enumerable) {\n  Object.defineProperty(obj, key, {\n    value: val,\n    enumerable: !!enumerable,\n    writable: true,\n    configurable: true\n  })\n}\n\n/**\n * \n * @param {object} vm 代理的对象\n * @param {string} source \n * @param {string} key 代理的属性\n */\nexport function proxy(vm, source, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[source][key];\n    },\n    set(newValue) {\n      vm[source][key] = newValue;\n    }\n  })\n}","/* \n  我们要对数组的 7 个方法进行重写：\n    push, pop, shift, unshift, reverse, sort, splice\n  因为这7个方法会改变原数组\n */\n\nconst arrayProto = Array.prototype;\n// 原型链查找，会向上查找，先查找我们重写的，如果没有再向上查找原型链上的\nexport const arrayMethods = Object.create(arrayProto); // 拷贝原型上的方法，防止我们的代码破坏了原型链\n\nconst methodsToPatch = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'splice',\n  'sort',\n  'reverse'\n];\n\nmethodsToPatch.forEach(method => {\n  arrayMethods[method] = function(...args) {\n    // 调用我们的方法后。又去调用了原生的方法\n    const result = arrayProto[method].apply(this, args);\n    let ob = this.__ob__; // 将实例上的方法传过来\n    // push shift splice 添加的值可能还是一个对象\n    let inserted; // 保存当前用户插入的元素\n    switch (method) {\n      case 'push':\n      case 'shift':\n        inserted = args;\n        break;\n      case 'splice':\n        // splice有3个属性，只有最后一个属性才是新增的值\n        inserted = args.slice(2);\n        break;\n    }\n    if (inserted) {\n      // 将新增的属性继续观察\n      ob.observerArray(inserted);\n    }\n    return result;\n  }\n});\n","import { isObject, def } from \"../util/index\";\nimport { arrayMethods } from './array';\n\nclass Observer {\n  constructor(value) {\n    this.value = value;\n    // 给当前值，添加一个不可枚举的私有属性，并于传值\n    def(value, '__ob__', this); // 这里如果不设置为不可枚举的值，会导致死循环\n    if (Array.isArray(value)) {\n      // 如果是数组的话。并不会对索引进行观察。因为会导致性能问题\n      // 如果数组里放的是对象。我再对里面的对象进行监控\n      this.observerArray(value);\n      // 我们还需要对 push pop shift unshift splice reverse sort 进行重写\n      value.__proto__ = arrayMethods;\n      /* \n        源码这里做了一个兼容处理，因为IE老浏览器是不支持 __proto__ 设置原型链\n        咋们这里为了简化，不做处理\n       */\n    } else {\n      // 如果是对象，则进行下一步\n      this.walk(value);\n    }\n  }\n  walk(obj) {\n    let keys = Object.keys(obj);\n    // 循环每一个key，添加get/set\n    for (let i = 0; i < keys.length; i++) {\n      let key = keys[i];\n      let value = obj[key];\n      defineReactive(obj, key, value); // 定义响应式数据\n    }\n  }\n  observerArray (items) {\n    for (let i = 0; i < items.length; i++) {\n      observe(items[i]);\n    }\n  }\n}\n\nexport function defineReactive(obj, key, value) {\n  // 递归设置嵌套的对象\n  observe(value);\n  Object.defineProperty(obj, key, {\n    get() {\n      return value;\n    },\n    set(newValue) { // 设置值的时候做一些操作\n      if (value === newValue) {\n        return;\n      }\n      console.log('update 视图更新');\n      observe(newValue); // 如果新设置的值是一个对象，也要被监控\n      value = newValue;\n    }\n  });\n\n  /* \n    通过Vue源码可以看出，data还可以设置 get/set属性\n      如果设置了get，需要先执行函数，拿到返回值再进行处理。为了简化，这里不做这一层的处理\n   */\n}\n\n// 用于观测数据，给每个属性添加 get 和 set 方法\nexport function observe(value) {\n  if (!isObject(value)) {\n    return;\n  }\n  return new Observer(value);\n}","import { observe } from \"./observer/index\";\nimport { proxy } from \"./util/index\";\n\nexport function initState(vm) {\n  const opts = vm.$options;\n  // Vue 的数据来源\n  if (opts.props) {\n    initProps(vm);\n  }\n  if (opts.methods) {\n    initMethods(vm);\n  }\n  if (opts.data) {\n    initData(vm);\n  }\n  if (opts.computed) {\n    initComputed(vm);\n  }\n  if (opts.watch) {\n    initWatch(vm);\n  }\n}\n\nfunction initProps(vm) {\n  \n}\nfunction initMethods(vm) {\n  \n}\nfunction initData(vm) {\n  // 数据初始化\n  let data = vm.$options.data;\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data;\n  // 对象劫持，用户改变了数据，我希望能检测到，从而更新页面\n  // MVVM 数据变化可以驱动视图\n\n  // 为了让用户更好的使用，需要将属性直接代理到 vm 上,用户可以通过 vm.xx 取值\n  for (let key in vm._data) {\n    proxy(vm, '_data', key);\n  }\n\n  // 通过Object.defineProperty 给属性增加get和set方法\n  observe(data); // 响应式原理\n}\nfunction initComputed(vm) {\n  \n}\nfunction initWatch(vm) {\n  \n}","// 字母a-zA-Z_ - . 数组小写字母 大写字母\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 标签名\n// ?:匹配不捕获   <aaa:aaa>\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\n// startTagOpen 可以匹配到开始标签 正则捕获到的内容是 (标签名)\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\n// 闭合标签 </xxxxxxx>\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\n// <div aa   =   \"123\"  bb=123  cc='123'\n// 捕获到的是 属性名 和 属性值 arguments[1] || arguments[2] || arguments[2]\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\n// <div >   <br/>\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >\n// 匹配动态变量的  +? 尽可能少匹配\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\nexport function parseHTML(html) {\n  let root; // 根节点\n  let stack = []; // 判断是否是闭合标签\n  let currentParent; // 用来标识当前元素的父节点\n  const ELEMENT_TYPE = 1; // 元素节点\n  const TEXT_TYPE = 3; // 文本节点\n\n  // 不停的去解析html字符串\n  while (html) {\n    let textEnd = html.indexOf('<'); // 从html < 开始匹配\n    if (textEnd === 0) {\n      // 如果当前索引为0,肯定是一个标签，可能是开始标签，也可能是结束标签，第一次肯定是开始标签\n      let startTagMatch = parseStartTag(); // 通过此方法获取到匹配的结果 tagName attrs\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        continue; // 如果开始标签匹配完之后，继续下一次匹配\n      }\n      let endTagMatch = html.match(endTag); // 匹配结尾标签\n      if (endTagMatch) { // 如果是结尾标签，则删除\n        advance(endTagMatch[0].length);\n        end(endTagMatch[1]);\n      }\n    }\n    let text;\n    if (textEnd > 0) { // 获取标签内的文本\n      text = html.substring(0, textEnd);\n      chars(text);\n    }\n    if (text) { // 如果文本存在，删除文本\n      advance(text.length);\n    }\n  }\n\n  function parseStartTag () {\n    let start = html.match(startTagOpen); // 如果匹配到就是开始标签\n    if (start) {\n      let match = {\n        tagName: start[1], // 标签名\n        attrs: [] // 属性\n      };\n      advance(start[0].length);\n      let end, attr;\n      // 解析属性，如果不是 > 结束标签，且有属性，则匹配\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5]\n        }); // 将标签和属性保存起来\n        advance(attr[0].length); // 将属性去掉\n      }\n      if (end) {\n        // 去掉结束的 >\n        advance(end[0].length);\n      }\n      return match;\n    }\n  }\n\n  // 删除匹配到的结果，不断向前走\n  function advance(n) {\n    html = html.substring(n);\n  }\n\n  function start (tagName, attrs) {\n    // 开始标签，创建一个AST元素\n    let element = createAstElement(tagName, attrs);\n    if (!root) { // 第一次没有root，就生成一个根节点\n      root = element;\n    }\n    currentParent = element; // 把点前元素标记成ast树\n    stack.push(element); // 将当前标签存放到栈中\n  }\n\n  function chars(text) {\n    text = text.trim();\n    // 文本节点\n    if (text) {\n      currentParent.children.push({\n        text,\n        type: TEXT_TYPE\n      });\n    }\n  }\n\n  function end(tagName) {\n    // 结束标签\n    let element = stack.pop();\n    // 判断标签是否已经闭合，此处暂未考虑自闭合的标签\n    if (element.tag !== tagName) {\n      throw new TypeError('标签未闭合');\n    }\n    // 我要标识当前这个元素是属于父元素的\n    currentParent = stack[stack.length - 1];\n    if (currentParent) {\n      element.parent = currentParent;\n      currentParent.children.push(element); // 实现了一个树的父子关系\n    }\n  }\n\n  function createAstElement(tagName, attrs) {\n    // 基本的树结构\n    return {\n      tag: tagName,\n      type: ELEMENT_TYPE,\n      children: [],\n      attrs,\n      parent: null\n    };\n  }\n\n  return root;\n}","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\nexport function generage (el) {\n  // 获取孩子节点\n  const children = genChildren(el.children);\n  let code = `_c(\"${el.tag}\", ${genProps(el.attrs)}${children ? `,${children}` : ''})`\n  return code;\n}\n\n// 处理成属性，拼接成字符串\nfunction genProps(attrs) {\n  // console.log(attrs)\n  if (!attrs.length) { // 如果没有属性就返回undefined\n    return undefined;\n  }\n  let str = '';\n  for (let i = 0; i < attrs.length; i++) {\n    let attr = attrs[i];\n    if (attr.name === 'style') { // 拼接style\n      // style=\"color: red\" => {style: {color: 'red'}}\n      let obj = {};\n      attr.value.split(';').forEach(item => {\n        let [key, value] = item.split(':');\n        obj[key] = value;\n      });\n      attr.value = obj;\n    }\n    str += `${attr.name}: ${JSON.stringify(attr.value)},`;\n  }\n  return `{${str.slice(0, -1)}}`;\n}\n\n// 处理孩子节点\nfunction genChildren (children) {\n  if (children && children.length > 0) {\n    // 拿到所有的孩子\n    return `${children.map(c => gen(c)).join(',')}`\n  } else {\n    return false;\n  }\n}\n\nfunction gen (node) {\n  if (node.type === 1) { // 元素标签\n    return generage(node);\n  } else { // 文本\n    let text = node.text;\n    // 还需要将里面的变量拿出来处理\n    // a {{name}} b {{age}} c  => _v(\"a\" + _s(name) + \"b\" + _s(age) + \"c\");\n    let tockens = [];\n    let match, index;\n    // 每次匹配的偏移量\n    let lastIndex = defaultTagRE.lastIndex = 0;\n    // 循环匹配大括号内的变量\n    while (match = defaultTagRE.exec(text)) {\n      index = match.index;\n      // 将第一个文本放进去\n      if (index > lastIndex) {\n        // 给文本加上双引号，后面解析的时候代表是一个字符串\n        tockens.push(JSON.stringify(text.slice(lastIndex, index)));\n      }\n      // 变量取出后用 _s 包裹\n      tockens.push(`_s(${match[1].trim()})`);\n      // 设置偏移量，下次匹配从此处开始\n      lastIndex = index + match[0].length;\n    }\n    // 将最后一个文本放进去\n    if (lastIndex < text.length) {\n      tockens.push(JSON.stringify(text.slice(lastIndex)));\n    }\n    return `_v(${tockens.join('+')})`;\n  }\n}","import { parseHTML } from './html-parser';\nimport { generage } from './codegen';\n\n/* \n  ast 语法树 -> 用对象来描述原生的语法\n  虚拟DOM -> 用对象来描述DOM节点\n */\nexport function compileToFunction(template) {\n  // 解析HTML字符串，变成AST语法树\n  const ast = parseHTML(template);\n  // 需要将AST树转为render函数，其实就是字符串拼接\n  // 核心思路就是，将模板转换为一下的字符串\n  // <div id=\"app\"><p>hello {{ name }}</p>{{ age }}</div>\n  // 将AST转为js方法\n  // _c('div', {id: app}, _c('p', undefined, _v('hello' + _s(name))), _s(age))\n  // console.log(ast);\n  let code = generage(ast);\n  // console.log(code);\n  // 所有的模板引擎实现，都需要用new Fucntion() 和 with\n  let renderFn = new Function(`with(this){return ${code}}`);\n  // console.log(renderFn);\n  return renderFn;\n}\n\n/* \n  <div id=\"app\">\n    <p>test</p>\n  </div>\n\n  AST语法树, 用一种抽象的语法来描述原生的HTML结构\n  let root = {\n    tag: 'div',\n    attrs: [{name: 'id', value: 'app'}],\n    type: 1,\n    children: [{\n      tag: 'p',\n      attrs: [],\n      type: 1,\n      children: [{\n        type: 3,\n        text: 'test'\n      }]\n    }]\n  }\n */","export default class Watcher {\n  constructor(vm, expOrFn, cb, options, isRenderWatcher) {\n    this.vm = vm;\n    this.cb = cb;\n    this.options = options;\n    this.isRenderWatcher = isRenderWatcher;\n\n    this.getter = expOrFn; // 将内部传过来的函数放在getter属性上\n    this.get();\n  }\n  get() {\n    this.getter(); // 执行的就是 vm._update\n  }\n}","export function patch(oldVnode, vnode) {\n  // console.log(oldVnode, vnode);\n  // 递归创建新的节点。替换掉老的节点\n  // 判断是更新还是要渲染\n  const isRealElement = oldVnode.nodeType;\n  if (isRealElement) { // 如果不存在说明是要渲染\n    const oldElm = oldVnode; // div id = \"app\"\n    const parentElm = oldElm.parentNode; // body\n\n    let el = createElm(vnode); // 创建元素\n    parentElm.insertBefore(el, oldElm.nextSibling); // 插入到老的元素的下一个节点。再把老节点删除，就实现了替换\n    parentElm.removeChild(oldElm);\n    return el; // 将替换后的节点挂载到 $el上\n  }\n}\n\nfunction createElm(vnode) {\n  // 根据虚拟节点创建真实的节点\n  const { tag, children, key, data, text } = vnode;\n  // 是标签就创建标签\n  if (typeof tag === 'string') { // 如果tag存在，就要创建一个元素\n    vnode.el = document.createElement(tag);\n    updatePropties(vnode) // 将属性添加到元素上\n    children.forEach(child => {\n      // 递归创建子节点，放到父节点中\n      return vnode.el.appendChild(createElm(child));\n    })\n  } else { // 不存在就创建一个文本几万点\n    // 虚拟dom上映射着真实dom\n    vnode.el = document.createTextNode(text);\n  }\n  return vnode.el;\n}\n\n// 更新属性\nfunction  updatePropties(vnode) {\n  let newProps = vnode.data || {};\n  let el = vnode.el;\n  for(let key in newProps) {\n    if (key === 'style') { // 将样式属性添加上\n      for(let styleName in newProps[key]) {\n        el.style[styleName] = newProps[key][styleName];\n      }\n    } else if (key === 'class') { // class特殊处理\n      el.className = newPropsp[key];\n    } else { // 剩下的就直接放上去就行了\n      el.setAttribute(key, newProps[key]);\n    }\n  }\n}","import Watcher from \"./observer/watcher\";\nimport { patch } from './vdom/patch'\n\nexport function mountComponent(vm, el) {\n  vm.$el = el; // 真实的dom元素\n  // 渲染页面\n  let updateComponent = () => { // 渲染和更新都会调用此方法\n    // 返回的是虚拟DOM，传给update 进行渲染操作\n    vm._update(vm._render());\n  }\n  // 渲染Watcher。每个组件都有一个Watcher\n  new Watcher(vm, updateComponent, () => {}, true); //true 表示他是一个渲染Watcher\n\n  /* \n    Watcher 就是用来渲染的\n    vm._render 通过解析render方法，渲染出虚拟dom\n    vm._update 通过虚拟dom,创建真实的dom\n   */\n}\n\nexport function lifecycleMixin(Vue) {\n  Vue.prototype._update = function(vnode) {\n    const vm = this;\n    // 通过虚拟节点，渲染出真实的dom\n    vm.$el = patch(vm.$el, vnode); // 需要用虚拟节点创建出真实节点，替换掉原有的$el\n  }\n}","import { initState } from './state';\nimport { compileToFunction } from './compiler/index';\nimport { mountComponent } from './lifecycle';\n// 在原型上添加一个init方法\nexport function initMixin (Vue) {\n  // 初始化流程\n  Vue.prototype._init = function(options) {\n    // 数据的劫持\n    const vm = this;\n    // vue 中使用 this.$options 指代的就是用户传递的属性\n    vm.$options = options;\n\n    // 初始化转态\n    initState(vm); // 分割代码\n\n    // 如果用户传入了el属性，需要将页面渲染出来\n    // 如果用户传入了el，就要实现挂载的流程\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el);\n    }\n  }\n\n  Vue.prototype.$mount = function(el) {\n    const vm = this;\n    const options = vm.$options;\n    el = document.querySelector(el);\n\n    // 默认会先查找render，没有就会采用 template,在没有就用html\n    if (!options.render) {\n      // 对模板进行编译\n      let template = options.template;\n      if (!template && el) { // 使用的html\n        template = getOuterHTML(el); // 拿到所有的DOM文档\n      }\n      // 我们需要将template转换为render方法\n      const render = compileToFunction(template);\n      options.render = render;\n    }\n\n    // 挂载组件\n    mountComponent(vm, el);\n  }\n}\n\nfunction getOuterHTML (el) { // 获取html元素\n  if (el.outerHTML) { // outerHTML 在IE中不兼容\n    return el.outerHTML\n  } else {\n    const container = document.createElement('div')\n    container.appendChild(el.cloneNode(true))\n    return container.innerHTML\n  }\n}","// 创建虚拟节点\nexport default class VNode {\n  constructor(tag, data, children, text) {\n    this.tag = tag;\n    this.data = data;\n    this.key = data && data.key;\n    this.children = children;\n    this.text = text;\n  }\n}\n","import VNode from './vnode';\n\nexport function createElement(tag, data = {}, ...children) {\n  return new VNode(tag, data, children, undefined);\n}\n\nexport function createTextNode(text) {\n  // 创建文本节点\n  return new VNode(undefined, undefined, undefined, text);\n}\n\n// 虚拟节点，就是通过 _c _v 实现用对象来描述dom的操作\n// 将template 转换成AST语法树 -> 生成render方法 -> 生成虚拟dom -> 生成真实dom\n// 页面更新，重新生成虚拟dom -> diff更新dom","import { createElement, createTextNode } from \"./vdom/create-element\";\n\nexport function renderMinxin(Vue) {\n  // 渲染虚拟DOM\n  Vue.prototype._render = function() {\n    const vm = this;\n    const { render } = vm.$options;\n\n    const vnode = render.call(vm); // 去实例化，取值\n    return vnode;\n  }\n  /* \n    _c 创建元素的虚拟节点\n    _v 创建文本的虚拟节点\n    _s JSON.stringfiy\n   */\n  Vue.prototype._c = function() {\n    return createElement(...arguments); //tagm data, children\n  }\n  Vue.prototype._v = function(text) {\n    return createTextNode(text);\n  }\n  Vue.prototype._s = function(val) {\n    if (!val) {\n      return '';\n    } else if (typeof val === 'object') {\n      return JSON.stringify(val);\n    }\n    return val;\n  }\n}","// Vue核心代码\nimport { initMixin } from './init';\nimport { renderMinxin } from './render';\nimport { lifecycleMixin } from './lifecycle';\n\nfunction Vue(options) {\n  // 进行Vue的初始化操作\n  this._init(options);\n}\n\ninitMixin(Vue);\nrenderMinxin(Vue);\nlifecycleMixin(Vue);\n\nexport default Vue;"],"names":["isObject","obj","def","key","val","enumerable","Object","defineProperty","value","writable","configurable","proxy","vm","source","get","set","newValue","arrayProto","Array","prototype","arrayMethods","create","methodsToPatch","forEach","method","args","result","apply","ob","__ob__","inserted","slice","observerArray","Observer","isArray","__proto__","walk","keys","i","length","defineReactive","items","observe","console","log","initState","opts","$options","props","methods","data","initData","computed","watch","_data","call","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","root","stack","currentParent","ELEMENT_TYPE","TEXT_TYPE","textEnd","indexOf","startTagMatch","parseStartTag","start","tagName","attrs","endTagMatch","match","advance","end","text","substring","chars","attr","push","name","n","element","createAstElement","trim","children","type","pop","tag","TypeError","parent","defaultTagRE","generage","el","genChildren","code","genProps","undefined","str","split","item","JSON","stringify","map","c","gen","join","node","tockens","index","lastIndex","exec","compileToFunction","template","ast","renderFn","Function","Watcher","expOrFn","cb","options","isRenderWatcher","getter","patch","oldVnode","vnode","isRealElement","nodeType","oldElm","parentElm","parentNode","createElm","insertBefore","nextSibling","removeChild","document","createElement","updatePropties","child","appendChild","createTextNode","newProps","styleName","style","className","newPropsp","setAttribute","mountComponent","$el","updateComponent","_update","_render","lifecycleMixin","Vue","initMixin","_init","$mount","querySelector","render","getOuterHTML","outerHTML","container","cloneNode","innerHTML","VNode","renderMinxin","_c","arguments","_v","_s"],"mappings":"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"}